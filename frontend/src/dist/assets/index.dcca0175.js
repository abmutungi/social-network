import{c as mt}from"./react-dom.ac1f127e.js";import{l as W,f as le,a as fe,b as ye,F as A,c as me,d as pe,e as pt,g as gt,h as ht,i as se,j as ft,k as be,m as ke,n as ve,o as Nt,p as vt,q as It,r as St}from"./@fortawesome.9b56900a.js";import{r as o}from"./react.f5894862.js";import{j as e,d as a,F as G,a as ge,e as Ne,f as ne}from"./react-router.c128959e.js";import{L as we,B as Dt}from"./react-router-dom.871a0d78.js";import"./scheduler.383d556d.js";import"./prop-types.9b445715.js";import"./@remix-run.ee6daad3.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&n(m)}).observe(document,{childList:!0,subtree:!0});function c(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=c(r);fetch(r.href,i)}})();const V=o.exports.createContext(null),xt=({children:t})=>{const[s,c]=o.exports.useState(null),[n,r]=o.exports.useState(!1),[i,m]=o.exports.useState([]),[l,v]=o.exports.useState(!1),[p,I]=o.exports.useState([]),[h,x]=o.exports.useState([]),[P,E]=o.exports.useState(""),[C,U]=o.exports.useState(0),[d,D]=o.exports.useState(""),[S,F]=o.exports.useState([]),[g,w]=o.exports.useState([]);let T;localStorage.length>0&&(T=JSON.parse(localStorage.getItem("loggedInUser")).ID);const[L,f]=o.exports.useState(!1),[N,b]=o.exports.useState([]),[J,K]=o.exports.useState(0);o.exports.useEffect(()=>{if(n||performance.navigation.TYPE_RELOAD){const k=new WebSocket("ws://localhost:8080/upgradesocket");return c(k),k.onopen=()=>{console.log("socket is open")},()=>{k.close(),k.onclose=()=>{console.log("socket is closed")}}}},[n]),s&&(s.onmessage=k=>{const y=JSON.parse(k.data);if(y.tipo==="chatHistory"&&(console.log("last sender ==> ",y.chatsfromgo[y.chatsfromgo.length-1].chatsender),y.chatsfromgo[y.chatsfromgo.length-1].chatrecipient==T&&console.log("THIS IS THE RECIPIENT CLIENT!!"),console.log("LAST CLICKED USER IN SOCKET ==> ",C),(C>0&&y.chatsfromgo[y.chatsfromgo.length-1].chatsender===C||C>0&&y.chatsfromgo[y.chatsfromgo.length-1].chatrecipient===C)&&_(y.chatsfromgo)),y.tipo==="socketChatNotif"){let R={socketnotifiers:[]};R.socketnotifiers=y.socketnotifiers,console.log("checking sCN --> ",h.socketnotifiers),console.log("lcu in scN cond ==> ",C),C===0&&y.recID===T&&O(R),C>0&&y.sendID===C&&(console.log("Sent Name ==> ",y.sendName),console.log("BEFORE DEL WHEN SAME ==> ",R.socketnotifiers),R.socketnotifiers=R.socketnotifiers.filter(X=>X!==y.sendName),console.log("AFTER DEL WHEN SAME ==> ",R.socketnotifiers),x(R)),C>0&&y.sendID!==C&&(console.log("Clciked name ===> ",d),R.socketnotifiers=R.socketnotifiers.filter(X=>X!==d),x(R))}if(y.tipo=="allNotifs"&&(z(y.allNotifs),Y(y),console.log("socket on message in notif bell --------->",y)),y.tipo==="groupEvents"&&(console.log("EVENTS??? --->",y.groupEvents),F(y.groupEvents),I(y.groupMessages)),y.tipo==="newGroupMessage"&&(J>0&&J==y.groupID&&(console.log("checking clicked group",J),I(y.groupMessages)),y.newNotif==="true"&&(f(!0),b(y.groupIDs),J>0&&J==y.groupID))){b(N.filter(X=>X!==J));const R={};R.loggedInUser=JSON.parse(localStorage.getItem("loggedInUser")).ID,R.groupID=J,R.type="groupChatboxClosed",s.send(JSON.stringify(R)),f(!1)}});const Z=k=>{r(k)},_=k=>{m(()=>k)},Y=k=>{v(k)},z=k=>{w(()=>k)},q=k=>{I(k)},O=k=>{x(()=>k)},j=k=>{U(()=>k)},te=k=>{D(()=>k)},H=k=>{K(()=>k)};return e(V.Provider,{value:{socket:s,openSocket:n,createSocket:Z,messages:i,updateChatMessages:_,updateClickedName:te,NewNotifsExist:l,MyNotifs:g,updateLastClickedUser:j,groupEventSocket:S,updateNewNotifsExist:Y,updateMyNotifs:z,groupMessages:p,updateGroupMessages:q,socketChatNotif:h,updateSocketChatNotifs:O,lastMsgSender:P,newSocketGroupMessage:L,setNewSocketGroupMessage:f,socketGroupIDs:N,setSocketGroupIDs:b,clickedGroupID:J,updateClickedGroupID:H},children:t})};W.add(le,fe,ye);const Q=a(G,{children:[e(A,{icon:le}),e("span",{className:"icon-text",children:"Follow"})]}),Pe=a(G,{children:[e(A,{icon:le}),e("span",{className:"icon-text",children:"Join"})]}),re=a(G,{children:[e(A,{icon:ye}),e("span",{className:"icon-text",children:" Unfollow"})]}),he=a(G,{children:[e(A,{icon:fe})," ",e("span",{className:"icon-text",children:"Pending"})]}),Ct=()=>{const{FollowText:t,updateFollowText:s,LoggedInUserID:c,userID:n,updateFollowing:r,PrivacyStatus:i,updateRequested:m}=o.exports.useContext(B),{socket:l}=o.exports.useContext(V);return e("button",{className:"followIcon",id:"profileFollowBtn",onClick:()=>{i?t==Q?(l.send(JSON.stringify({notificationType:"followRequest",notifiyee:n,notifier:c,type:"followNotifs"})),s(he),m(!0),r(!1),console.log(`...follow request sent to ${n}`)):t===re&&(s(Q),fetch("http://localhost:8080/unfollow",{method:"POST",credentials:"include",body:JSON.stringify({userID:n,loggedInUserID:c})}),s(Q),m(!1),console.log(`...unfollowing ${n}`)):t===Q?(fetch("http://localhost:8080/follow",{method:"POST",credentials:"include",body:JSON.stringify({userID:n,loggedInUserID:c})}),s(re),r(!0),console.log(`...now following ${n}`)):t===re&&(fetch("http://localhost:8080/unfollow",{method:"POST",credentials:"include",body:JSON.stringify({userID:n,loggedInUserID:c})}),s(Q),r(!1),console.log(`...unfollowing ${n}`))},children:t})};W.add(me,pe);const ce=a(G,{children:[e(A,{icon:"fa-solid fa-lock"}),e("span",{className:"icon-text",children:"Private"})]}),ie=a(G,{children:[e(A,{icon:"fa-solid fa-users"}),e("span",{className:"icon-text",children:"Public"})]}),yt=()=>{const{PrivacyStatus:t,PrivacyBtnText:s,updatePrivacyBtnText:c,updatePrivacyStatus:n,LoggedInUserID:r}=o.exports.useContext(B);let i=JSON.parse(localStorage.getItem("loggedInUser"));return e("button",{className:"privacy-btn",onClick:()=>{console.log("LU Check --> ",i),t&&(console.log("Button clicked to make it public!"),i.Privacy=0,localStorage.setItem("loggedInUser",JSON.stringify(i)),c(ie),n(!1),fetch("http://localhost:8080/updatePrivacy",{method:"POST",credentials:"include",body:JSON.stringify({loggedInUserID:r,privacyStatus:!1})})),t||(console.log("Button clicked to make it private!"),i.Privacy=1,localStorage.setItem("loggedInUser",JSON.stringify(i)),c(ce),n(!0),fetch("http://localhost:8080/updatePrivacy",{method:"POST",credentials:"include",body:JSON.stringify({loggedInUserID:r,privacyStatus:!0})}))},children:s})},B=o.exports.createContext();function bt({children:t}){const[s,c]=o.exports.useState(()=>{if(localStorage.length>0){const u=JSON.parse(localStorage.getItem("loggedInUser")).ID;return u||0}}),[n,r]=o.exports.useState([]),[i,m]=o.exports.useState(),[l,v]=o.exports.useState([]),[p,I]=o.exports.useState([]),[h,x]=o.exports.useState(()=>{if(localStorage.length>0){const u=JSON.parse(localStorage.getItem("loggedInUser")).ID;return u||0}}),[P,E]=o.exports.useState([]),[C,U]=o.exports.useState([]),[d,D]=o.exports.useState(()=>{if(localStorage.length>0){const u=JSON.parse(localStorage.getItem("loggedInUser")).AboutText;return u||""}}),[S,F]=o.exports.useState(()=>{if(localStorage.length>0){const u=JSON.parse(localStorage.getItem("loggedInUser")).Email;return u||""}}),[g,w]=o.exports.useState(()=>{if(localStorage.length>0){const u=JSON.parse(localStorage.getItem("loggedInUser")).Nickname;return u||""}}),[T,L]=o.exports.useState(()=>{if(localStorage.length>0){const u=JSON.parse(localStorage.getItem("loggedInUser")).DOB;return u||""}}),[f,N]=o.exports.useState(()=>{if(localStorage.length>0){const u=JSON.parse(localStorage.getItem("loggedInUser")).Avatar;return u!=""?u:"userdefaulttwo.png"}}),[b,J]=o.exports.useState(()=>{if(localStorage.length>0){const u=JSON.parse(localStorage.getItem("loggedInUser")).ID;return u||0}}),[K,Z]=o.exports.useState(()=>{if(localStorage.length>0){let u=JSON.parse(localStorage.getItem("loggedInUser")).Privacy;return JSON.parse(u)?ce:ie}}),[_,Y]=o.exports.useState(()=>{if(localStorage.length>0){let u=JSON.parse(localStorage.getItem("loggedInUser")).Privacy;return JSON.parse(u)}}),[z,q]=o.exports.useState(),[O,j]=o.exports.useState(!1),[te,H]=o.exports.useState(!1),[k,y]=o.exports.useState(Q),[R,X]=o.exports.useState(Pe),[M,$]=o.exports.useState(!1),[ae,Ae]=o.exports.useState(!1),[Ee,Fe]=o.exports.useState([]),[Me,Le]=o.exports.useState([]),[Be,Je]=o.exports.useState(!1),Re=u=>{Je(u)},je=u=>{Le(u)},qe=u=>{Fe(u)},$e=u=>{c(()=>u)},He=u=>{r(()=>u)},Ve=u=>{m(()=>u)},Ke=u=>{v(()=>u)},ze=u=>{D(()=>u)},We=u=>{N(()=>u)},Ye=u=>{Y(()=>u)},Xe=u=>{y(()=>u)},Ze=u=>{q(()=>u)},_e=u=>{X(()=>u)},Qe=u=>{j(()=>u)},et=u=>{H(()=>u)},tt=u=>{J(()=>u)},ot=u=>{Z(()=>u)},st=u=>{x(u)},at=u=>{E(u)},nt=u=>{U(u)},rt=u=>{$(u)},ct=u=>{Ae(u)},it=u=>{I(u)},lt=u=>{F(()=>u)},dt=u=>{w(()=>u)},ut=u=>{L(()=>u)};return e(B.Provider,{value:{userID:s,DBAllUsers:n,updateUserID:$e,updateinitialDB:He,GroupID:i,updateGroupID:Ve,AllGroupsData:l,updateAllGroupsData:Ke,AboutText:d,updateAboutText:ze,ProfilePhotoBackground:f,updateProfilePhotoBackground:We,PrivacyStatus:_,updatePrivacyStatus:Ye,FollowText:k,updateFollowText:Xe,Following:z,Requested:O,updateFollowing:Ze,updateRequested:Qe,LoggedInUserID:b,updateLoggedInUserID:tt,PrivacyBtnText:K,updatePrivacyBtnText:ot,DynamicID:h,updateDynamicID:st,posts:P,updatePosts:at,isGroupMember:M,updateisGroupMember:rt,groupNotUser:ae,updategroupNotUser:ct,groupPosts:C,updateGroupPosts:nt,GroupEvents:p,updateGroupEvents:it,JoinText:R,updateJoinText:_e,GroupRequested:te,updateGroupRequested:et,groupInvitees:Ee,updateGroupInvitees:qe,navClicked:Be,updateNavClicked:Re,navData:Me,updateNavData:je,Email:S,updateEmail:lt,Nickname:g,updateNickname:dt,DOB:T,updateDOB:ut},children:t})}const kt=({props:t})=>{const{LoggedInUserID:s}=o.exports.useContext(B),{socket:c}=o.exports.useContext(V);console.log("socket from single notification component ------------>",c);let n=t.notifType;switch(n){case"followRequest":n="follow request";break;case"groupInvite":n="group invitation to: ";break;case"groupRequest":n="request to join your group: ";break;case"eventInvite":n="invitation to an event with: ";break}console.log(n);const r=l=>{c.send(JSON.stringify({loggedInUserID:s,type:"notifs"})),fetch("http://localhost:8080/actionNotif",{method:"POST",credentials:"include",body:JSON.stringify({notifID:t.id,notifierID:t.notifierID,notifiyeeID:s,notifGroupID:Number(l.target.id),notifEventID:Number(l.target.name),notifAccept:1})});const v=document.getElementById(t.id);v.parentNode.removeChild(v)},i=l=>{fetch("http://localhost:8080/actionNotif",{method:"POST",credentials:"include",body:JSON.stringify({notifID:t.id,notifierID:t.notifierID,notifiyeeID:s,notifGroupID:Number(l.target.id),notifEventID:Number(l.target.name),notifAccept:0})});const v=document.getElementById(t.id);v.parentNode.removeChild(v)},m=l=>l===""?"../assets/img/ext/babyblue-placeholder.jpeg":`../assets/img/ext/${l}`;return a("div",{id:t.id,className:"notification-container",children:[a("div",{className:"notifs-profile-content",children:[e("img",{className:"notifs-profile cp-profile-pic",src:m(t.profileImg),alt:"img"}),a("div",{className:"notifs-content-date",children:[a("div",{className:"notifs-content",children:[a("strong",{children:[t.firstName," ",t.lastName]}),` sent you a ${n} ${t.groupName}`]}),e("div",{className:"notifs-date",children:t.notifDate})]})]}),a("div",{className:"notifs-action",children:[e("button",{id:t.groupID,name:t.eventID,onClick:r,className:"confirm-button",children:"Confirm"}),e("button",{id:t.groupID,name:t.eventID,onClick:i,children:"Remove"})]})]})},wt=({show:t,onClose:s,data:c})=>{var m;const{socket:n,MyNotifs:r,updateNewNotifsExist:i}=o.exports.useContext(V);if(t)console.log("socket from notification modal ------------>",n),i(!1),console.log("MyNotifs--------->",r);else return null;return e("div",{className:"notifs-modal",onClick:s,role:"presentation",children:a("div",{className:"notifs-modal-content",onClick:l=>l.stopPropagation(),role:"presentation",children:[e("div",{className:"notifs-modal-header"}),e("div",{className:"notifs-modal-title",children:"Notifications"}),e("div",{className:"notifs-modal-body",children:(m=c==null?void 0:c.sort((l,v)=>v.notifID-l.notifID))==null?void 0:m.map(l=>e(kt,{props:{id:l.notifID,firstName:l.notifFName,lastName:l.notifLName,notifType:l.notifType,notifierID:l.notifierID,groupName:l.notifGroupName,groupID:l.notifGroupID,notifDate:l.notifDate,eventID:l.notifEventID,profileImg:l.notifAvatar}},l.notifID))})]})})},ee=o.exports.createContext({});function Pt({children:t}){const[s,c]=o.exports.useState(()=>{const l=localStorage.getItem("loggedInUser");return l?JSON.parse(l):{}}),[n,r]=o.exports.useState([]);function i(l){c(l),localStorage.setItem("loggedInUser",JSON.stringify(l))}const m=l=>{r(()=>l)};return e(ee.Provider,{value:{loggedInUser:s,updateLoggedInUser:i,chatNotifsOnLogin:n,updateChatNotifsOnLogin:m},children:t})}function Ut(){return e("div",{className:"ContainerLogo",children:e("span",{children:"connect"})})}function Ot(){const{loggedInUser:t}=o.exports.useContext(ee),{LoggedInUserID:s}=o.exports.useContext(B),{NewNotifsExist:c,updateNewNotifsExist:n,MyNotifs:r,updateMyNotifs:i}=o.exports.useContext(V),m=ge();async function l(){const P=await(await fetch("http://localhost:8080/logout",{method:"POST",credentials:"include",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Accept:"application/json"}})).json();console.log("Data check -> ",P),P.success&&(m("/"),location.reload(),localStorage.clear())}async function v(){try{const P=await(await fetch("http://localhost:8080/displayNotif",{method:"POST",credentials:"include",body:JSON.stringify({loggedInUserID:s})})).json();console.log("Notif data check on click ->",P),i(P.AllNotifs)}catch(x){console.log("error displaying notifications",x)}}const[p,I]=o.exports.useState(!1);async function h(){try{const P=await(await fetch("http://localhost:8080/checkNotif",{method:"POST",credentials:"include",body:JSON.stringify({loggedInUserID:s})})).json();P.NewNotif&&n(!0),console.log("Login notif data check ->",P)}catch(x){console.log("error sending notifications that have been read",x)}}return o.exports.useEffect(()=>{c||h()},[c]),a(G,{children:[a("div",{className:"ContainerEventIcons",children:[a("div",{children:[e(A,{onClick:()=>{I(!0),n(!1),v()},icon:pt,className:"ClickableHeaderIcons"}),c?e("span",{className:"dot"}):null]}),e("div",{children:e(A,{icon:gt,onClick:()=>l(),className:"ClickableHeaderIcons"})})]}),e(wt,{onClose:()=>I(!1),show:p,data:r})]})}function Gt(){return a("div",{className:"TopHeader",children:[e(Ut,{}),e(Ot,{})]})}const Tt=t=>{var r;const[s,c]=o.exports.useState(!1);return a("div",{className:"cb-container",children:[a("div",{className:"select-box",onClick:()=>{const i=document.querySelector(".checkboxes");s?(i.style.display="none",c(!1)):(i.style.display="block",c(!0))},role:"presentation",children:[e("select",{name:"",id:"",children:e("option",{children:"Select followers"})}),e("div",{className:"over-select"})]}),e("div",{className:"checkboxes",children:(r=t.followersFromParent)==null?void 0:r.map(i=>a("label",{htmlFor:i.UserID,children:[e("input",{type:"checkbox",value:i.UserID,name:"post-viewer"}),i.Firstname]},i.UserID))})]})};W.add(ht,se);const Ue=t=>{const[s,c]=o.exports.useState(""),[n,r]=o.exports.useState(null),[i,m]=o.exports.useState("public"),[l,v]=o.exports.useState(""),{LoggedInUserID:p,updatePosts:I,GroupID:h,groupNotUser:x,DynamicID:P}=o.exports.useContext(B),[E,C]=o.exports.useState(!1),[U,d]=o.exports.useState([]);if(!t.show)return null;const D=w=>{w.preventDefault();const T=new FormData(w.target);T.append("imgName",l),T.append("userID",p);let L=x?h:P;x?T.append("groupID",L):T.append("userID",L),x&&T.append("GuserID",p);const f=T.getAll("post-viewer");T.append("viewers",JSON.stringify(f)),console.log("form data in obj",Object.fromEntries(T.entries())),fetch("http://localhost:8080/createpost",{credentials:"include",method:"POST",body:T}).then(N=>N.json()).then(N=>{I([]),I(N)}),c(""),r(null),m("public"),v(""),t.onClose(),C(!1)};async function S(){const w=new FormData;w.append("userID",p);const L=await(await fetch("http://localhost:8080/myfollowers",{method:"POST",body:w,credentials:"include"})).json();d(L)}const F=w=>{w.target.value==="custom"?(console.log("custom clicked"),S(),C(!0)):C(!1)},g=()=>{t.onClose(),C(!1),m("public")};return e("div",{className:"cp-modal",onClick:g,role:"presentation",children:e("div",{className:"cp-container",onClick:w=>w.stopPropagation(),role:"presentation",children:a("form",{style:{display:"contents"},onSubmit:D,children:[a("div",{className:"cp-header",children:[e("div",{}),e("div",{className:"cp-title",children:"Create post"}),e(A,{onClick:g,icon:"fa-solid fa-xmark",className:"cp-x"})]}),a("div",{className:"cp-pic-name",children:[e("img",{className:"cp-profile-pic",src:t.profileImg,alt:"img"}),a("div",{className:"cp-name&viewer",children:[e("div",{className:"cp-name cp-span",children:t.name}),a("div",{className:"cp-dropdowns",children:[a("select",{name:"privacyOption",id:"who-can-view",className:"cp-dropdown",value:i,onChange:w=>{m(w.target.value),F(w)},children:[e("option",{name:"privacy",value:"public",children:"Public"}),e("option",{name:"privacy",value:"private",children:"Private"}),e("option",{name:"privacy",value:"custom",children:"Custom"})]}),E&&e(Tt,{followersFromParent:U})]})]})]}),e("textarea",{required:!0,className:"cp-text-content",placeholder:"Write Something...",type:"text",name:"textContent",value:s,onChange:w=>{c(w.target.value)}}),n&&e("span",{className:"cp-img-details",children:l}),a("div",{className:"cp-add-img",children:[e("div",{className:"cp-span",children:"Add image to your post"}),e("label",{htmlFor:"file-input",children:e(A,{icon:"fa-regular fa-image",className:"cp-img-icon"})}),e("input",{id:"file-input",type:"file",style:{display:"none"},onChange:w=>{r(w.target.files[0]),v(w.target.files[0].name)},name:"uploadedPostImg"})]}),e("button",{className:"cp-button",type:"submit",children:"Post"})]})})})},At=()=>{const t=JSON.parse(localStorage.getItem("loggedInUser")).Avatar;let s=t!=""?`../assets/img/ext/${t}`:"../assets/img/ext/man-utd.png";const[c,n]=o.exports.useState(!1);return a(G,{children:[a("button",{onClick:()=>n(!0),className:"add-post-btn",children:[e(A,{icon:"fa-solid fa-circle-plus"}),e("span",{className:"icon-text",children:"Post"})]}),e(Ue,{name:JSON.parse(localStorage.getItem("loggedInUser")).FName,profileImg:s,onClose:()=>n(!1),show:c})]})},Et=t=>a("div",{className:"ProfileInfo",children:[e("div",{className:"ProfileName",children:t.ProfileName}),a("div",{className:"Profile-follow",children:[e("div",{className:"ProfileFollowing",children:t.Following}),e("div",{className:"ProfileFollowers",children:t.Followers})]})]}),Ft=t=>e("div",{className:"ProfilePic",style:{backgroundImage:`url(../assets/img/ext/${t.background})`}});const Oe=({show:t,onClose:s})=>{const{LoggedInUserID:c,GroupID:n}=o.exports.useContext(B),{socket:r}=o.exports.useContext(V),[i,m]=o.exports.useState({eventName:"",eventDescription:"",eventStartDate:"",creator:c,GroupID:n,type:"eventInviteNotifs"}),l=p=>{const{name:I,value:h}=p.target;m({...i,[I]:h})},v=p=>{p.preventDefault();const I=p.target,h=new FormData(I);h.append("creator",c),h.append("groupID",n),m(""),r.send(JSON.stringify(i)),s()};return t?e(G,{children:e("div",{role:"presentation",className:"cg-modal-container",onClick:s,children:a("div",{role:"presentation",className:"cg-modal",onClick:p=>p.stopPropagation(),children:[a("div",{className:"cg-modal-header",children:[e("div",{}),e("h3",{children:"Create Event"}),e("div",{className:"closeicon",children:e(A,{onClick:s,icon:se,className:"cg-modal-close",size:"xs"})})]}),a("form",{id:"createGroupEvent",className:"cg-form",onSubmit:v,children:[a("div",{className:"cg-modal-body",children:[e("div",{className:"cg-modal-titles",children:"Event Name"}),e("input",{name:"eventName",value:i.eventName,onChange:l,className:"cg-input",type:"text",placeholder:"what's your event called?",required:!0}),e("br",{}),e("div",{className:"cg-modal-titles",children:"Event Description"}),e("textarea",{name:"eventDescription",style:{resize:"none"},value:i.eventDescription,onChange:l,className:"cg-textarea",placeholder:"what's it about?",required:!0}),e("br",{}),a("div",{className:"event-form-group",children:[e("label",{style:{marginRight:"0.5rem"},htmlFor:"startDate",children:"Date & Time"}),e("input",{name:"eventStartDate",type:"date",min:"2023-01-01",value:i.eventStartDate,onChange:l,required:!0,className:"event-form-control",id:"event-form-date-start"})]})]}),e("div",{className:"cg-modal-footer",children:e("button",{onSubmit:v,className:"cg-submit-button",type:"submit",children:"Submit"})})]})]})})}):null};W.add(ft);const Mt=()=>{const[t,s]=o.exports.useState(!1);return a(G,{children:[a("button",{onClick:()=>s(!0),className:"add-event-btn",children:[e(A,{icon:"fa-solid fa-calendar-days"}),e("span",{className:"icon-text",children:"Event"})]}),e(Oe,{onClose:()=>s(!1),show:t})]})};W.add(le,fe);const Lt=t=>{const{socket:s}=o.exports.useContext(V),{GroupID:c,LoggedInUserID:n,GroupRequested:r,updateGroupRequested:i,updateJoinText:m}=o.exports.useContext(B);return e("button",{className:"group-request-btn",onClick:()=>{m(he),r||s.send(JSON.stringify({groupID:c,loggedInUserID:n,type:"groupNotifs"})),i(!0)},children:t.hasRequested})},Bt=t=>e("button",{className:"static-status-btn",children:t.status}),Jt=({groupid:t,userid:s,label:c})=>a("label",{children:[e("input",{className:"invitecheck",id:s,name:t,type:"checkbox"}),c,e("br",{})]}),Rt=({show:t,onClose:s})=>{const{socket:c}=o.exports.useContext(V),{LoggedInUserID:n,GroupID:r,groupInvitees:i}=o.exports.useContext(B),m=l=>{l.preventDefault(),console.log(Ie(n));let v=Ie(n),p={};p.Invitees=v,p.type="groupInviteNotifs",console.log("*****group invites******",JSON.stringify(p)),c.send(JSON.stringify(p)),s()};return t?(console.log("GIIIN---->",i),e(G,{children:e("div",{role:"presentation",className:"cg-modal-container",onClick:s,children:a("div",{role:"presentation",className:"cg-modal",onClick:l=>l.stopPropagation(),children:[a("div",{className:"cg-modal-header",children:[e("div",{}),e("h3",{children:"Please Select"}),e(A,{onClick:s,icon:se,className:"cg-modal-close",size:"lg"})]}),e("form",{id:"groupInviteForm",className:"gi-form",onSubmit:m,children:e("div",{role:"presentation",className:"cg-modal-container",onClick:s,children:a("div",{role:"presentation",className:"cg-modal",onClick:l=>l.stopPropagation(),children:[a("div",{className:"cg-modal-header",children:[e("div",{}),e("h3",{children:"Invite Users"}),e(A,{onClick:s,icon:se,className:"cg-modal-close",size:"lg"})]}),e("div",{className:"invite-to-group",children:i==null?void 0:i.map(l=>e(Jt,{groupid:r,userid:l.UserID,label:l.Name},l.UserID))}),e("div",{className:"cg-modal-footer",children:e("button",{onSubmit:m,className:"cg-submit-button",type:"submit",children:"Invite"})})]})})})]})})})):null},Ie=t=>{var s=document.querySelectorAll(".invitecheck");const c=[];return s.forEach(n=>{if(n.checked){let r={};r.invitedId=n.id,r.groupId=n.name,r.inviter=t,r.type="groupInviteNotifs",c.push(r)}}),c};W.add(be);const jt=()=>{const[t,s]=o.exports.useState(!1),{GroupID:c,updateGroupInvitees:n}=o.exports.useContext(B);async function r(){const l=await(await fetch("http://localhost:8080/getgroupinvitees",{method:"POST",body:c})).json();console.log("Potential group members ---> ",l),n(l)}return a(G,{children:[a("button",{onClick:()=>{r(),s(!0)},className:"group-request-btn",children:[e(A,{icon:be}),e("span",{className:"icon-text",children:"Invite"})]}),e(Rt,{onClose:()=>s(!1),show:t})]})},qt=()=>{const[t,s]=o.exports.useState(!1),[c,n]=o.exports.useState(""),{GroupID:r}=o.exports.useContext(B),{loggedInUser:i}=o.exports.useContext(ee),m=()=>{i.Avatar==""||i.Avatar==null?n("userdefaulttwo.png"):n(i.Avatar)};return console.log("IMAGE PATH FROM GP",c,`
`,i),o.exports.useEffect(()=>{r>0&&m()},[r]),a(G,{children:[a("button",{onClick:()=>s(!0),className:"add-post-btn",children:[e(A,{icon:"fa-solid fa-circle-plus"}),e("span",{className:"icon-text",children:"Post"})]}),e(Ue,{name:JSON.parse(localStorage.getItem("loggedInUser")).FName,profileImg:`../assets/img/ext/${c}`,onClose:()=>s(!1),show:t})]})},$t=()=>{const[t,s]=o.exports.useState(!1);return a(G,{children:[a("button",{onClick:()=>s(!0),className:"add-post-btn",children:[e(A,{icon:"fa-solid fa-circle-plus"}),e("span",{className:"icon-text",children:"Event"})]}),e(Oe,{show:t,onClose:()=>s(!1)})]})};W.add(ke,le,me,pe);const Ht=()=>{const{DBAllUsers:t,AllGroupsData:s,userID:c,updateUserID:n,GroupID:r,updateGroupID:i,updateAboutText:m,updateNickname:l,updateDOB:v,updateEmail:p,ProfilePhotoBackground:I,LoggedInUserID:h,updatePrivacyStatus:x,PrivacyStatus:P,GroupRequested:E,Following:C,isGroupMember:U,groupNotUser:d,updategroupNotUser:D,updateProfilePhotoBackground:S}=o.exports.useContext(B),{loggedInUser:F}=o.exports.useContext(ee),[g,w]=o.exports.useState(F.FName),[T,L]=o.exports.useState(F.LName),[f,N]=o.exports.useState(),[b,J]=o.exports.useState();async function K(q,O){const j=new FormData;j.append("LIU",q),j.append("Type",O);const H=await(await fetch("http://localhost:8080/getnavdata",{method:"POST",body:j})).json();let k=Se(H),y=k>0?k+" followers":"";N(y)}async function Z(q,O){const j=new FormData;j.append("LIU",q),j.append("Type",O);const H=await(await fetch("http://localhost:8080/getnavdata",{method:"POST",body:j})).json();let k=Se(H),y=k>0?k+" following":"";J(y)}const _=q=>{D(!1);for(const O of t)O.UserID==q&&(console.log("FROM LOOP--->",O),w(O.Firstname),L(O.Lastname),p(O.Email),m(O.AboutText),l(O.Nickname),v(O.DOB),x(O.Privacy),O.Avatar!=""?S(O.Avatar):S("userdefaulttwo.png")),i(0)},Y=()=>s.filter(j=>j.GroupID==r)[0].Members+" members",z=q=>{D(!0);for(const O of s)O.GroupID==q&&(w(O.GroupName),L(""),O.Avatar!=""?S(O.Avatar):S("creategroupposticonone.png"),m(O.AboutText));n(0)};return o.exports.useEffect(()=>{K(c,"followers"),Z(c,"following"),c>0&&_(c)},[c]),o.exports.useEffect(()=>{r>0&&z(r)},[r]),e(G,{children:a("div",{className:"Profile",children:[e("div",{className:"ProfilePicContainer"}),e(Ft,{background:I}),e(Et,{ProfileName:`${g} ${T}`,Followers:f,Following:d?Y():b}),a("div",{className:"ProfileBtnContainer",children:[c===h&&!d?e(yt,{}):null,c===h&&!d?e(At,{}):null,c!==h&&!d?e(Ct,{followStatus:C?re:Q}):null,e(Mt,{}),d&&!U?e(Lt,{hasRequested:E?he:Pe}):null,c!=h&&!d?e(Bt,{status:P?"Private":"Public"}):null,d&&U?e(jt,{}):null,d&&U?e(qt,{}):null,d&&U?e($t,{}):null]})]})})},Se=t=>t==null||t==null?0:t.length;function Vt(){return e("div",{className:"LowerHeader",children:e(Ht,{})})}const Kt=({show:t,onClose:s})=>{const{loggedInUser:c}=o.exports.useContext(ee),{AllGroupsData:n,updateAllGroupsData:r}=o.exports.useContext(B),[i,m]=o.exports.useState("");async function l(p){try{const h=await(await fetch("http://localhost:8080/creategroup",{method:"POST",credentials:"include",body:p})).json();r(h),s()}catch(I){console.log("Error with the creategroup fn",I)}}const v=p=>{p.preventDefault();const I=p.target,h=new FormData(I);h.append("creatorID",c.ID),h.append("imgName",i),l(h),m(""),console.log("AGD",n)};return t?e(G,{children:e("div",{role:"presentation",className:"cg-modal-container",onClick:s,children:a("div",{role:"presentation",className:"cg-modal",onClick:p=>p.stopPropagation(),children:[a("div",{className:"cg-modal-header",children:[e("div",{}),e("h3",{children:"Create Group"}),e(A,{onClick:s,icon:se,className:"cg-modal-close",size:"lg"})]}),a("form",{className:"cg-form",onSubmit:v,children:[a("div",{className:"cg-modal-body",children:[e("input",{name:"groupName",className:"cg-input",type:"text",placeholder:"enter group name",required:!0}),e("input",{name:"groupDescription",className:"cg-input",type:"text",placeholder:"enter group description",required:!0}),e("label",{htmlFor:"avatar",children:"Choose an image"}),e("input",{type:"file",name:"group-avatar",onChange:p=>{m(p.target.files[0].name)}})]}),e("div",{className:"cg-modal-footer",children:e("button",{className:"cg-submit-button",type:"submit",children:"Submit"})})]})]})})}):null};const zt=({msgContent:t,user:s,date:c,isCurrentUser:n})=>e(G,{children:a("div",{className:n?"chat-bubble-current-user":"chat-bubble",children:[e("p",{className:"chat-msg",children:t}),e("span",{className:"user-date",children:[s," ",c]})]})}),De=({show:t,onClose:s,name:c,id:n,data:r,avatar:i,groupClicked:m,chatNotifExists:l,notifierID:v})=>{const{socket:p,updateSocketChatNotifs:I,updateLastClickedUser:h,updateClickedName:x,socketGroupIDs:P,setSocketGroupIDs:E,updateClickedGroupID:C}=o.exports.useContext(V),[U,d]=o.exports.useState(""),D=f=>{f.preventDefault(),console.log("checking if group has been clicked",m);const N=new FormData(f.target);N.append("loggedInUser",JSON.parse(localStorage.getItem("loggedInUser")).ID);var b={};m?(N.append("type","newGroupMessage"),N.append("groupID",n),N.forEach((J,K)=>b[K]=J),console.log("checking group message form",b),p.send(JSON.stringify(b))):(N.append("recipientID",n),N.append("type","newMessage"),N.forEach((J,K)=>b[K]=J),p.send(JSON.stringify(b))),d("")},S=o.exports.useRef(null);o.exports.useEffect(()=>{var f;(f=S.current)==null||f.scrollIntoView({behavior:"smooth"})},[r]);const F=f=>JSON.parse(localStorage.getItem("loggedInUser")).FName==f;let g=c;function w(){const f=new FormData;f.append("loggedInUser",JSON.parse(localStorage.getItem("loggedInUser")).ID);var N={};f.append("recipientID",n),f.append("type","removeChatNotifs"),f.forEach((b,J)=>N[J]=b),p.send(JSON.stringify(N))}const T=()=>{E(P.filter(f=>f!==n))},L=()=>{const f={};f.loggedInUser=JSON.parse(localStorage.getItem("loggedInUser")).ID,f.groupID=n,f.type="groupChatboxClosed",p.send(JSON.stringify(f))};return t?e(G,{children:e("div",{role:"presentation",className:"chat-modal-container",onClick:s,children:a("div",{className:"chat-box-container",id:c,children:[a("div",{className:"chat-box-header",onClick:f=>f.stopPropagation(),role:"presentation",children:[e("img",{className:"chat-box-av",src:i,alt:""}),e("span",{className:"chat-box-name",children:g}),e(A,{onClick:()=>{s(),h(0),x(""),w(),T(),L(),C(0)},icon:se,className:"chat-header-close",size:"lg"})]}),a("div",{className:"chat-box-body",children:[r==null?void 0:r.map((f,N)=>e(zt,{msgContent:f.message,user:f.senderName,isCurrentUser:F(f.senderName),date:f.chatDate},N)),e("div",{ref:S})]}),e("div",{className:"chat-box-footer",children:e("form",{className:"chat-box-form",onSubmit:D,children:e("input",{className:"msg-input",type:"text",name:"msgContent",placeholder:"Enter your message....",value:U,onChange:f=>{d(f.target.value)}})})})]})})}):null},oe=t=>{const{updateUserID:s,updateGroupID:c,updateFollowing:n,LoggedInUserID:r,userID:i,GroupID:m,updateRequested:l,updateFollowText:v,updateDynamicID:p,updateisGroupMember:I,updateGroupRequested:h,updateNavClicked:x}=o.exports.useContext(B),{updateLastClickedUser:P,lastClickedUser:E,groupMessages:C,updateGroupMessages:U,messages:d,updateChatMessages:D,socketChatNotif:S,updateClickedName:F,socketGroupIDs:g,setSocketGroupIDs:w,updateClickedGroupID:T}=o.exports.useContext(V),{chatNotifsOnLogin:L}=o.exports.useContext(ee),[f,N]=o.exports.useState(!1),[b,J]=o.exports.useState(""),[K,Z]=o.exports.useState(!1),_=ge(),[Y,z]=o.exports.useState(!1);async function q(){try{const $=await(await fetch("http://localhost:8080/followCheck",{method:"POST",credentials:"include",body:JSON.stringify({loggedInUserID:r,userID:i})})).json();if($.canFollow?(n(!1),v(Q)):$.following?(n(!0),v(re)):$.requested&&(l(!0),v(he),n(!1)),$.msg){_("/");return}z(!1)}catch(M){console.log("error fetching relationshiip",M)}console.log("FETCH RELATIONSHIP FUNCTION")}async function O(){try{const $=await(await fetch("http://localhost:8080/isgroupmember",{method:"POST",credentials:"include",body:JSON.stringify({loggedInUserID:r,groupID:m})})).json();I($.ismember),h($.requested),z(!1)}catch(M){console.log("error fetching groupinfo",M)}}o.exports.useEffect(()=>{i>0&&Y&&q()},[i]),o.exports.useEffect(()=>{m>0&&Y&&O()},[m]);const j=new FormData;j.append("senderID",JSON.parse(localStorage.getItem("loggedInUser")).ID),j.append("recipientID",t.id);async function te(){const $=await(await fetch("http://localhost:8080/sendprivatemessage",{method:"POST",credentials:"include",body:j})).json();console.log("messages data",$),D($),t.notifier&&(L.notifiers=L.notifiers.filter(ae=>ae!==t.chatName),console.log("cnl check  --> ",L.notifiers)),t.socketnotifier&&(S.socketnotifiers=S.socketnotifiers.filter(ae=>ae!==t.chatName),console.log("snf check  --> ",S.socketnotifiers))}const H=new FormData;H.append("groupID",t.groupID);const[k,y]=o.exports.useState(t.newGroupMessage),R=()=>{t.newSocketGroupMessage&&w(g.filter(M=>M!==t.groupID))};async function X(){H.append("hasMessageIcon",k),H.append("hasSocketMessageIcon",t.newSocketGroupMessage),H.append("loggedInUser",JSON.parse(localStorage.getItem("loggedInUser")).ID);const $=await(await fetch("http://localhost:8080/sendgroupmessages",{method:"POST",credentials:"include",body:H})).json();U($)}if(t.type==="AllUsers")return a("div",{role:"presentation",onClick:M=>{M.preventDefault(),z(!0),x(!1),s(Number(M.currentTarget.id)),p(M.currentTarget.id)},className:"SingleProfile",id:t.id,children:[e("div",{className:"ChatPic",children:e("img",{src:t.avatar,width:"25",height:"25",alt:"chat-pic"})}),a("p",{className:"ChatName",children:[t.chatName,e("small",{className:"group-event-text",children:t.eventText})]})]});if(t.type==="AllGroups")return a("div",{role:"presentation",onClick:M=>{M.preventDefault(),z(!0),x(!1),console.log("onclick group -------------->",m),c(Number(M.currentTarget.id))},className:"SingleProfile",id:t.id,children:[e("div",{className:"ChatPic",children:e("img",{src:t.avatar,width:"25",height:"25",alt:"chat-pic"})}),a("p",{className:"ChatName",children:[t.chatName,e("small",{className:"group-event-text",children:t.eventText})]})]});if(t.type==="Chats")return a("div",{role:"presentation",onClick:M=>{M.preventDefault(),P(t.id),F(t.chatName),f||te(),N(!0),J(t.chatName),Z(!1),console.log("props.id -> ",t.id),console.log("LAST CLICKED USER IN SPC -> ",E),console.log("message struct --> ",d)},className:"SingleProfile",id:t.id,children:[e(De,{onClose:()=>N(!1),show:f,name:b,id:t.id,data:d,avatar:t.avatar,groupClicked:K,chatNotifExists:t.socketnotifier,notifierID:t.notifierID}),e("div",{className:"ChatPic",children:e("img",{src:t.avatar,width:"25",height:"25",alt:"chat-pic"})}),a("p",{className:"ChatName",children:[t.chatName," ",t.notifier||t.socketnotifier?e(A,{icon:ve,className:"chatNotifIcon"}):null]})]});if(t.type=="GroupChats")return a("div",{className:"SingleProfile",role:"presentation",onClick:M=>{M.preventDefault(),f||X(),N(!0),J(t.chatName),Z(!0),y(!1),R(),T(t.groupID)},id:t.id,children:[e(De,{onClose:()=>{N(!1)},show:f,name:b,id:t.groupID,data:C,avatar:t.avatar,groupClicked:K}),e("div",{className:"ChatPic",children:e("img",{src:t.avatar,width:"25",height:"25",alt:"chat-pic"})}),a("p",{className:"ChatName",children:[t.chatName," ",k||t.newSocketGroupMessage?e(A,{icon:ve,className:"chatNotifIcon"}):null]})]});if(t.type==="Navbar"){let M=t.avatar===""?"../assets/img/ext/blue-placeholder.jpeg":`../assets/img/ext/${t.avatar}`;return a("div",{role:"presentation",className:"Nav-SingleProfile",id:t.id,children:[e("div",{className:"ChatPic",children:e("img",{src:M,width:"25",height:"25",alt:"chat-pic"})}),e("p",{className:"ChatName",children:t.chatName})]})}},de=({users:t,type:s})=>{const{socketChatNotif:c,lastMsgSender:n,socketGroupIDs:r}=o.exports.useContext(V),{chatNotifsOnLogin:i,updateChatNotifsOnLogin:m}=o.exports.useContext(ee),{LoggedInUserID:l}=o.exports.useContext(B),[v,p]=o.exports.useState([]),I=new FormData;let h=JSON.parse(localStorage.getItem("loggedInUser")).ID;I.append("loggedInID",h);async function x(){const D=await(await fetch("http://localhost:8080/chatnotificationsonlogin",{method:"POST",credentials:"include",body:I})).json();console.log("messages data",D),m(D)}const P=(d,D)=>d!=null?d.includes(D):!1;async function E(){const D=await(await fetch("http://localhost:8080/groupchatnotifs",{method:"POST",credentials:"include",body:I})).json();console.log("groupIDs on login",D.groupIDs),p(D.groupIDs)}const C=d=>v!==null?v.includes(d):!1,U=d=>r!=null?r.includes(d):!1;if(o.exports.useEffect(()=>{x(),E()},[]),s==="AllGroups")return t==null?void 0:t.map((d,D)=>{let S=d.Avatar===""?"../assets/img/ext/creategroupposticonone.png":`../assets/img/ext/${d.Avatar}`;return e(oe,{chatName:`${d.GroupName}`,id:d.GroupID,type:s,members:d.Members,creator:d.CreatorID,avatar:S},D)});if(s==="AllUsers"){const d=t==null?void 0:t.filter(D=>D.UserID!==l);return d==null?void 0:d.map((D,S)=>{let F=D.Avatar===""?"../assets/img/ext/userdefaulttwo.png":`../assets/img/ext/${D.Avatar}`;return e(oe,{chatName:`${D.Firstname}`,id:D.UserID,type:s,avatar:F},S)})}if(s==="Chats")return t==null?void 0:t.map((d,D)=>{let S=d.avatar===""?"../assets/img/ext/userdefaulttwo.png":`../assets/img/ext/${d.avatar}`;return e(oe,{chatName:`${d.FName}`,id:d.userID,type:s,avatar:S,notifier:P(i.notifiers,d.FName)&&i,socketnotifier:P(c.socketnotifiers,d.FName),notifierID:n,onClick:()=>{console.log("chatbox clicked")}},D)});if(s==="GroupChats")return t==null?void 0:t.map((d,D)=>{let S=d.groupAvatar===""?"../assets/img/ext/creategroupposticonone.png":`../assets/img/ext/${d.groupAvatar}`;return e(oe,{chatName:`${d.groupName}`,groupID:d.groupID,type:s,avatar:S,newGroupMessage:C(d.groupID),newSocketGroupMessage:U(d.groupID)},D)})};W.add(ke,me,pe);const ue=t=>{const[s,c]=o.exports.useState(!1);return t.headers==="Groups"?a("div",{className:"MultipleProfiles",children:[a("div",{className:"ChatTitle",children:["Groups"," ",e(A,{onClick:()=>c(!0),className:"create-event-btn",icon:"fa-solid fa-circle-plus"}),e(Kt,{onClose:()=>c(!1),show:s})]}),e("div",{className:"AllCumulativeData",children:e(de,{users:t.data,type:t.type})})]}):t.headers==="Users"?a("div",{className:"MultipleProfiles",children:[e("div",{className:"ChatTitle",children:t.headers}),e("div",{className:"AllCumulativeData",children:e(de,{users:t.data,type:t.type})})]}):t.headers==="Chats"?a("div",{className:"MultipleProfiles",children:[a("div",{className:"ChatTitle",children:[t.headers," "]}),e("div",{className:"AllCumulativeData",children:e(de,{users:t.data,type:t.type})})]}):a("div",{className:"MultipleProfiles",children:[a("div",{className:"ChatTitle",children:[t.headers," "]}),e("div",{className:"AllCumulativeData",children:e(de,{users:t.data,type:t.type})})]})},Wt=()=>{const[t,s]=o.exports.useState([]),[c,n]=o.exports.useState([]),r=new FormData,i=JSON.parse(localStorage.getItem("loggedInUser")).ID;r.append("loggedInUserID",i);async function m(){const p=await(await fetch("http://localhost:8080/mychatusers",{method:"POST",body:r,credentials:"include"})).json();s(p)}async function l(){const p=await(await fetch("http://localhost:8080/mygroupchats",{method:"POST",body:r,credentials:"include"})).json();n(p)}return o.exports.useEffect(()=>{m(),l()},[]),a("div",{className:"AllChats",children:[e(ue,{parentClass:"AllUsers",headers:"Chats",data:t,childClass:Ce.UsersClasses.child,type:"Chats"}),e(ue,{parentClass:"AllUsers",headers:"Group Chats",data:c,childClass:Ce.UsersClasses.child,type:"GroupChats"})]})};const Yt=()=>{const{updateNavData:t,updateNavClicked:s,LoggedInUserID:c,DynamicID:n}=o.exports.useContext(B);function r(m){s(!0),i(m)}return a("div",{className:"navbar",children:[e("a",{className:"nav-button",href:"/",children:"Home"}),e("button",{disabled:c===0,onClick:()=>r("followers"),className:"nav-button",children:"Followers"}),e("button",{disabled:c===0,onClick:()=>r("following"),className:"nav-button",children:"Following"}),e("button",{disabled:c===0,onClick:()=>r("groups"),className:"nav-button",children:"Groups"})]});async function i(m){const l=new FormData;l.append("LIU",n),l.append("Type",m);const p=await(await fetch("http://localhost:8080/getnavdata",{method:"POST",body:l})).json();t(p),console.log("NAVBAR DATA FROM GO ---- >>  ",p)}};W.add(Nt);const Xt=t=>{const s=t.commentImage;return a("div",{className:"single-comment",children:[e("img",{className:"cp-profile-pic comment-profile-pic",src:t.imgPath,alt:"img"}),a("div",{className:"comment",children:[a("div",{className:"comment-bubble",children:[e("div",{className:"comment-name",children:t.name}),e("span",{className:"comment-span",children:t.content})]}),s&&e("img",{className:"comment-img",src:t.commentImage,alt:"img"}),e("div",{className:"comment-date",children:t.date})]})]})},Zt=t=>{var U;const[s,c]=o.exports.useState(""),[n,r]=o.exports.useState(null),[i,m]=o.exports.useState(""),{updatePosts:l,DynamicID:v,groupNotUser:p,GroupID:I}=o.exports.useContext(B),h=d=>{d.preventDefault();const D=d.target.form,S=new FormData(D);p?(S.append("grouppostID",t.postID),S.append("imgName",i),S.append("groupID",I),S.append("commenterID",JSON.parse(localStorage.getItem("loggedInUser")).ID)):(S.append("postID",t.postID),S.append("imgName",i),S.append("userID",v),S.append("commenterID",JSON.parse(localStorage.getItem("loggedInUser")).ID)),fetch("http://localhost:8080/storecomment",{credentials:"include",method:"POST",body:S}).then(F=>F.json()).then(F=>{console.log("FROM COMMENTS??",F),l(F)}),c(""),r(null)},x=d=>{if(d.key==="Enter")return d.preventDefault(),h(d)},P=d=>d===""?"":`../assets/img/ext/${d}`,E=d=>d===""?"../assets/img/ext/userdefaulttwo.png":`../assets/img/ext/${d}`;return JSON.parse(localStorage.getItem("loggedInUser")).Avatar,e(G,{children:a("div",{className:"comments-container",children:[a("div",{className:"write-comment",children:[e("img",{className:"cp-profile-pic comment-profile-pic",src:"../assets/img/ext/userdefaultone.png",alt:"img"}),a("form",{className:"comment-form",role:"presentation",children:[e("textarea",{name:"textContent",value:s,onChange:d=>{c(d.target.value)},className:"comment-input",placeholder:"Write a comment...",rows:1,onKeyDown:x}),n&&e("span",{className:"cp-img-details",children:i}),e("label",{htmlFor:"file-upl",type:"button",className:"comment-upload-btn",children:e(A,{icon:"fa-solid fa-image"})}),e("input",{id:"file-upl",type:"file",style:{display:"none"},onChange:d=>{r(d.target.files[0]),m(d.target.files[0].name)},name:"uploadedCommentImg"})]})]}),(U=t.comments)==null?void 0:U.map(d=>e(Xt,{name:d.name,content:d.textContent,date:d.date,commentImage:P(d.imageContent),imgPath:E(d.profilePic)},d.commentID))]})})};const _t=t=>a("div",{className:"event-banner-body",children:[e("div",{className:"event-body-date",children:t.eventdate}),e("div",{className:"event-body-eventname",children:t.eventname}),a("div",{className:"event-body-attendance",children:[a("div",{className:"event-body-going",children:[t.attending," going"]}),a("div",{className:"event-body-notgoing",children:[t.notattending," can't go"]})]})]}),Qt=t=>a("div",{className:"event-banner",children:[e("div",{className:"event-banner-head",children:e(oe,{chatName:t.creatorname,eventText:" created an event"})}),e(_t,{eventdate:t.date,eventname:t.eventname,attending:t.attending,notattending:t.notattending})]});W.add(vt,It,me,pe);const xe=t=>{const s=t.postImg,c=t.commentsArray;return a("div",{className:"post-container",children:[a("div",{className:"cp-pic-name",children:[e("img",{className:"cp-profile-pic",src:t.profileImgPath,alt:"img"}),a("div",{className:"cp-name&viewer",children:[e("div",{className:"cp-name cp-span",children:t.name}),e("span",{className:"date",children:t.date})]})]}),e("span",{className:"post-text-span",children:t.textContent}),s&&e("img",{src:t.postImg,alt:"img",className:"post-uploaded-img"}),e("div",{className:"post-details",children:a("button",{className:"show-comments-button",children:[t.commentsCount," comments"]})}),e(Zt,{comments:c,postID:t.postID})]})},eo=()=>{const{DynamicID:t,posts:s,updatePosts:c,groupNotUser:n,GroupID:r,LoggedInUserID:i,isGroupMember:m,GroupEvents:l,updateGroupEvents:v,navClicked:p,navData:I,PrivacyStatus:h,Following:x}=o.exports.useContext(B),{groupEventSocket:P}=o.exports.useContext(V),E=new FormData,C=JSON.parse(localStorage.getItem("loggedInUser")).ID;E.append("loggedInUserID",C);let U=n?r:t;n?E.append("groupID",U):E.append("userID",U),n&&E.append("GuserID",i);async function d(){const w=await(await fetch("http://localhost:8080/myposts",{method:"POST",body:E})).json();console.log("FROM GO POSTS ---- >>  ",w),c(n?w.Posts:w),n&&v(w.Events)}o.exports.useEffect(()=>{d()},[U]),o.exports.useEffect(()=>{v(P)},[P]);const D=g=>g===""?"":`../assets/img/ext/${g}`,S=g=>g===""?"../assets/img/ext/userdefaulttwo.png":`../assets/img/ext/${g}`,F=g=>g===null?0:g.length;return!n&!p&&!h||!n&!p&&h&&x||!n&!p&&h&&t===i?e(G,{children:e("div",{className:"posts-container",children:s==null?void 0:s.map(g=>e(xe,{profileImgPath:S(g.profilePic),name:g.name,date:g.createdAt,textContent:g.textContent,commentsCount:F(g.comments),postImg:D(g.postImg),commentsArray:g.comments,postID:g.postID},g.postID))})}):!n&!p&&h&&!x?e(G,{children:e("div",{className:"posts-container",children:a("div",{className:"not-a-member",children:[e("br",{}),e("br",{}),e("br",{}),e("br",{}),e(A,{icon:"fa-solid fa-lock"}),e("br",{}),e("br",{}),"This account is private",e("br",{}),"Follow this account to see their posts and info.",e("br",{})]})})}):n&&m&&!p?e(G,{children:a("div",{className:"posts-container",children:[e("div",{className:"group-event-banners",children:l==null?void 0:l.map(g=>e(Qt,{creatorname:g.creator,date:g.date,eventname:g.eventname+" by "+g.creator,attending:g.cango,notattending:g.notgoing},g.eventid))}),s==null?void 0:s.map(g=>e(xe,{profileImgPath:S(g.profilePic),name:g.name,date:g.createdAt,textContent:g.textContent,commentsCount:F(g.comments),postImg:D(g.postImg),commentsArray:g.comments,postID:g.grouppostID},g.grouppostID))]})}):p&&x||p&&!h||p&&h&&i===t?e(G,{children:e("div",{className:"nav-bar-style",children:I==null?void 0:I.map(g=>Object.prototype.hasOwnProperty.call(g,"GroupID")?e(oe,{id:g.GroupID,chatName:g.GroupName,headers:"Nav",childClass:"AGroup",type:"Navbar",avatar:g.Avatar},g.GroupID):e(oe,{id:g.UserID,chatName:g.Firstname+" "+g.Lastname,headers:"Nav",childClass:"AGroup",type:"Navbar",avatar:g.Avatar},g.UserID))})}):e(G,{children:e("div",{className:"posts-container",children:a("div",{className:"not-a-member",children:[e("br",{}),e("br",{}),e("br",{}),e("br",{}),e(A,{icon:"fa-solid fa-lock"}),e("br",{}),e("br",{}),"This page is private",e("br",{}),"Join this group / follow this user to see their profile.",e("br",{})]})})})};function to({text:t,email:s,dob:c,nickname:n}){const{PrivacyStatus:r,Following:i}=o.exports.useContext(B),{groupNotUser:m,DynamicID:l}=o.exports.useContext(B),v=JSON.parse(localStorage.getItem("loggedInUser")).ID;return e("div",{className:"about-container",children:a("div",{className:"about-content",children:[e("div",{className:"about-title",children:"About"}),e(A,{icon:St}),a("div",{className:"about-description",children:[e("div",{children:t}),e("div",{children:l==v&&!m||!r&&!m||i&&!m?s:""}),e("div",{children:l==v&&!m||!r&&!m||i&&!m?`Birthday: ${c}`:""}),e("div",{children:l==v&&!m||!r&&!m||i&&!m?n:""})]})]})})}const Ce={GroupChats:["AgendaZone","Ski Club","Suya Society","SuperEaglesSupporters","AgendaZone","Ski Club","Suya Society","SuperEaglesSupporters"],GroupChatClasses:{parent:"GroupChats",child:"GroupProfile"},AllUsers:["Nate","Keivon","Ricky","Sarmad","Tolu","Arnold","Yonas"],Followers:["Nate","Keivon","Ricky","Sarmad","Tolu","Arnold","Yonas"],UsersClasses:{users:"AllUsers",groups:"AllGroups",chats:"UserChats",groupchats:"GroupChats",child:"AUser"},FollowersClasses:{parent:"AllFollowers",child:"AFollower"}},oo=()=>{const{DBAllUsers:t,updateinitialDB:s,AllGroupsData:c,updateAllGroupsData:n,AboutText:r,Email:i,Nickname:m,DOB:l}=o.exports.useContext(B);async function v(){try{const h=await(await fetch("http://localhost:8080/dummyusers")).json();s(h),console.log("user data received",h)}catch(I){console.log("Error fetching users",I)}}async function p(){try{const h=await(await fetch("http://localhost:8080/getgroupdata")).json();n(h),console.log("group data received",h)}catch(I){console.log("Error fetching groups",I)}}return o.exports.useEffect(()=>{v(),p()},[]),e(G,{children:a("div",{className:"left-side",children:[e(to,{text:r,email:i,nickname:m,dob:l}),e(ue,{headers:"Users",data:t,childClass:"AUser",type:"AllUsers"}),e(ue,{headers:"Groups",data:c,childClass:"AGroup",type:"AllGroups"})]})})};function so(){return a("div",{className:"MainBody",children:[e(oo,{}),a("div",{className:"middle-div",children:[e(Yt,{}),e("div",{className:"nav-and-post",children:e(eo,{})})]}),e(Wt,{})]})}const Ge=()=>{const[t,s]=o.exports.useState(""),[c,n]=o.exports.useState(""),[r,i]=o.exports.useState(null),[m,l]=o.exports.useState(""),v=ge(),[p,I]=o.exports.useState({email:"",password:"",firstName:"",lastName:"",dateOfBirth:"",nickname:"",aboutMe:""}),h=C=>{s("");const{name:U,value:d}=C.target;I({...p,[U]:d})},x=o.exports.useRef(null),P=C=>{C.preventDefault(),x.current.click()};return e(G,{children:a("div",{className:"register-container",children:[e("div",{className:"register-logo",children:e("div",{className:"logo-text",children:e("span",{children:"Connect"})})}),a("form",{className:"register-form",onSubmit:C=>{C.preventDefault();const U=new FormData(C.target);U.append("imgName",m),console.log(U);async function d(){const S=await(await fetch("http://localhost:8080/register",{method:"POST",body:U,credentials:"include"})).json();S.error?s(S.regMsg):(n("You have successfully registered and are now being redirected to the log in page!"),setTimeout(()=>{v("/")},3e3))}d()},children:[e("input",{required:!0,placeholder:"First Name",type:"text",name:"firstName",value:p.firstName,onChange:h}),e("input",{required:!0,placeholder:"Last Name",type:"text",name:"lastName",value:p.lastName,onChange:h}),e("input",{required:!0,placeholder:"email@email.com",type:"email",name:"email",value:p.email,onChange:h}),e("input",{required:!0,placeholder:"Password",type:"password",name:"password",value:p.password,onChange:h}),e("input",{required:!0,type:"date",name:"dateOfBirth",value:p.dateOfBirth,onChange:h}),e("input",{placeholder:"Nickname (Optional)",type:"text",name:"nickname",value:p.nickname,onChange:h}),e("textarea",{placeholder:"About Me (Optional)",name:"aboutMe",value:p.aboutMe,onChange:h}),e("button",{onClick:P,className:"avatar-upload-btn",htmlFor:"avatar",children:"Upload An Avatar (Optional)"}),e("input",{type:"file",ref:x,name:"avatar",value:p.avatar,onChange:C=>{i(C.target.files[0]),l(C.target.files[0].name)},style:{display:"none"}}),e("button",{className:"register-button",type:"submit",children:"Create Account"}),e(we,{to:"/",style:{textDecoration:"none",color:"white"},children:e("button",{className:"register-login-button",type:"submit",children:"Already have an account? Click here to log in"})}),t&&e("div",{className:"errorMsg",children:t}),c&&e("div",{className:"successMsg",children:c}),e(Ne,{children:e(ne,{path:"/login",element:e(Te,{})})})]})]})})};const Te=()=>{const{loggedInUser:t,updateLoggedInUser:s}=o.exports.useContext(ee),{createSocket:c,updateNewNotifsExist:n}=o.exports.useContext(V),{updateAboutText:r,updateEmail:i,updateNickname:m,updateDOB:l,updateUserID:v,updateLoggedInUserID:p,updatePrivacyStatus:I,PrivacyStatus:h,updatePrivacyBtnText:x,updateDynamicID:P,updateProfilePhotoBackground:E}=o.exports.useContext(B);console.log("PS CHECK ON LOGIN --> ",h);async function C(){console.log("cookie check => ",document.cookie),console.log("cookie id check => ",document.cookie.slice(document.cookie.indexOf("=")+1));let T={CookieID:document.cookie.slice(document.cookie.indexOf("=")+1)};console.log("CURRENT USER CHECK -> ",t);const f=await(await fetch("http://localhost:8080/frontendlogin",{method:"POST",credentials:"include",body:JSON.stringify(T),headers:{"Content-Type":"application/json",Accept:"application/json"}})).json();if(console.log("Data check -> ",f),!f.success){const N={ID:f.User.UserID,Email:f.User.Email,FName:f.User.Firstname,LName:f.User.Lastname,AboutText:f.User.AboutText,Privacy:f.User.Privacy,Avatar:f.User.Avatar,Notifications:f.User.Notifications,DOB:f.User.DOB,Nickname:f.User.Nickname};console.log(N),s(N),v(N.ID),r(N.AboutText),i(N.Email),l(N.DOB),m(N.Nickname),p(N.ID),I(N.Privacy),n(N.Notifications),N.Avatar!=""?E(N.Avatar):E("userdefaulttwo.png"),h&&x(ce),h||x(ie),console.log(t),D("/home")}}document.cookie!==""&&C();const[U,d]=o.exports.useState(""),D=ge(),[S,F]=o.exports.useState({email:"",password:""}),g=T=>{d("");const{name:L,value:f}=T.target;F({...S,[L]:f})};return e(G,{children:a("div",{className:"login-container",children:[e("div",{className:"login-logo",children:e("div",{className:"logo-text",children:e("span",{children:"Connect"})})}),a("form",{onSubmit:T=>{T.preventDefault();async function L(){const N=await(await fetch("http://localhost:8080/login",{method:"POST",credentials:"include",body:JSON.stringify(S),headers:{"Content-Type":"application/json",Accept:"application/json"}})).json();if(console.log("Data check -> ",N),N.error&&N.loginMsg==="User is already logged in")d(N.loginMsg),setTimeout(()=>{D("/home")},3e3);else if(N.error)d(N.loginMsg);else{const b={ID:N.User.UserID,Email:N.User.Email,FName:N.User.Firstname,LName:N.User.Lastname,AboutText:N.User.AboutText,Privacy:N.User.Privacy,Avatar:N.User.Avatar,Notifications:N.User.Notifications,DOB:N.User.DOB,Nickname:N.User.Nickname};console.log(b),s(b),v(b.ID),r(b.AboutText),i(b.Email),l(b.DOB),m(b.Nickname),p(b.ID),I(b.Privacy),n(b.Notifications),P(b.ID),b.Avatar!=""?E(b.Avatar):E("userdefaulttwo.png"),h&&x(ce),h||x(ie),console.log("2ND PS CHECK ON LOGIN --> ",b.Privacy),b.Privacy&&x(ce),b.Privacy||x(ie),console.log("3RD PS CHECK ON LOGIN --> ",h),console.log("4TH CHECK --> ",I(b.Privacy)),c(!0),D("/home")}}L()},className:"login-form",children:[e("input",{required:!0,name:"email",value:S.email,onChange:g,type:"email",placeholder:"email@email.com"}),e("input",{required:!0,name:"password",value:S.password,onChange:g,type:"password",placeholder:"Password"}),e("button",{type:"submit",className:"login-button",children:"LOGIN"}),e(we,{to:"/register",style:{textDecoration:"none",color:"white"},children:e("button",{className:"login-register-button",children:"Register"})}),U&&e("div",{className:"loginErrorMsg",children:U}),e(Ne,{children:e(ne,{path:"/register",element:e(Ge,{})})})]})]})})},ao=()=>e(G,{children:e(xt,{children:e(Pt,{children:e(bt,{children:a(Ne,{children:[e(ne,{path:"/register",element:e(Ge,{})}),e(ne,{path:"/",element:e(Te,{})}),e(ne,{path:"/home",element:a(G,{children:[e(Gt,{}),e(Vt,{}),e(so,{})]})})]})})})})}),no=document.getElementById("root"),ro=mt.createRoot(no);ro.render(e(Dt,{children:e(ao,{})}));
